<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.vet.controller.work.eSign.SignMapper">
    <resultMap id="eSignLineResultMap" type="com.example.vet.model.Member">
    </resultMap>
    <resultMap id="MasterResultMap" type="com.example.vet.model.MasterVO">
    </resultMap>
    <resultMap id="MissedAnimalList" type="com.example.vet.model.adopt.MissedAnimal">
    </resultMap>
    <resultMap id="SIGN" type="com.example.vet.model.Sign">
    </resultMap>
    <select id="selectLine" resultMap="eSignLineResultMap">
        SELECT * FROM USER_TEST5
        WHERE MEMBER_ROLE = 'ROLE_ADMIN' OR MEMBER_ROLE = 'ROLE_MASTER'
    </select>
    <select id="selectAdopter" resultMap="MasterResultMap">
        SELECT MASTERPK, MASTER_NM, MASTER_USERNAME, MASTER_PW, MASTER_EMAIL, MASTER_PNUMBER, MASTER_ADDRESS, MASTER_BDATE, MASTER_GENDER
        FROM MASTER_TEST
    </select>
    <select id="selectAbandon" resultMap="MissedAnimalList">
        SELECT KINDCD, COLORCD,AGE, WEIGHT FROM ABANDONED_ANIMAL_TEST
    </select>
<!--    <select id="selectDetail" parameterType="int" resultMap="SignDocument">-->

<!--    </select>-->
<!--    <insert id="insertDraft" parameterType="SignDocument">-->

<!--    </insert>-->
        <insert id="insertSign" parameterType="com.example.vet.model.Sign" statementType="PREPARED" useGeneratedKeys="true" keyProperty="sign_pk">
            <selectKey keyProperty="sign_pk" resultType="int" order="AFTER">
                SELECT SIGN_PK_SEQ.currval AS sign_pk FROM DUAL
            </selectKey>
            <![CDATA[
                INSERT INTO SIGN2_TEST (SIGN_PK, SIGN_TITLE, SIGN_CONTENT, MEMBER_PK, ADOPT_PK) VALUES (SIGN_PK_SEQ.nextval, #{sign_title}, #{sign_content}, #{member_pk}, #{adopt_pk})
            ]]>
        </insert>
        <insert id="insertDraftLine" parameterType="int">
            INSERT INTO SIGN_LINE2_TEST (SIGN_PK,MEMBER_PK) VALUES (#{generatedSignPk},1)
        </insert>
</mapper>